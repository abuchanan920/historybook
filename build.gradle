plugins {
  id 'java'
  id 'com.github.johnrengelman.shadow' version '1.2.2'
}

apply plugin: 'application'
apply plugin: 'com.github.johnrengelman.shadow'
apply plugin: 'eclipse'

version = '1.0-SNAPSHOT'

mainClassName = 'com.difference.historybook.server.HistoryBookApplication'

repositories {
    jcenter()
}

dependencies {
    compile 'org.slf4j:slf4j-api:1.7.13'
    compile 'io.dropwizard:dropwizard-core:0.9.1'
    compile 'io.dropwizard:dropwizard-assets:0.9.1'
    compile 'org.apache.lucene:lucene-core:5.4.0'
    compile 'org.apache.lucene:lucene-analyzers-common:5.4.0'
    compile 'org.apache.lucene:lucene-queryparser:5.4.0'
    compile 'org.apache.lucene:lucene-highlighter:5.4.0'
    compile 'org.apache.lucene:lucene-grouping:5.4.0'
    compile 'com.google.guava:guava:19.0'
    compile 'org.littleshoot:littleproxy:1.1.0-beta1'
    compile 'com.jcraft:jzlib:1.1.3'
    compile 'io.mola.galimatias:galimatias:0.2.1'
    compile 'org.jsoup:jsoup:1.8.3'

    testCompile 'junit:junit:4.12'
    testCompile 'org.mockito:mockito-all:1.10.19'
    testCompile 'com.github.tomakehurst:wiremock:1.57'
}

shadowJar {
  mergeServiceFiles()
}

run {
  args 'server'
}
